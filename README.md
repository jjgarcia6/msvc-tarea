# ABC Motor - Sistema de Microservicios

![Java](https://img.shields.io/badge/Java-21-orange)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.4-brightgreen)
![Spring Cloud Gateway](https://img.shields.io/badge/Spring%20Cloud-Gateway-blue)
![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-green)
![Netflix Eureka](https://img.shields.io/badge/Netflix-Eureka-blue)
![Swagger](https://img.shields.io/badge/Swagger-OpenAPI-brightgreen)
![Maven](https://img.shields.io/badge/Maven-3.6+-red)

## üìñ Descripci√≥n

ABC Motor es un sistema distribuido de microservicios desarrollado con **Spring Boot** y **Spring Cloud** que gestiona un cat√°logo de productos y sus ventas. El proyecto implementa patrones de arquitectura de microservicios incluyendo service discovery, balanceador de carga y comunicaci√≥n entre servicios.

## üèóÔ∏è Arquitectura del Sistema

```
                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                           ‚îÇ  API Gateway    ‚îÇ
                           ‚îÇ  (Port: 8080)   ‚îÇ
                           ‚îÇ                 ‚îÇ
                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î§  Load Balancer  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                      ‚îÇ    ‚îÇ Route Handler   ‚îÇ    ‚îÇ
                      ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                      ‚îÇ                           ‚îÇ
                      ‚ñº                           ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  msvc-products  ‚îÇ              ‚îÇ   msvc-sales    ‚îÇ
         ‚îÇ  (Port: 0/Auto) ‚îÇ              ‚îÇ  (Port: 0/Auto) ‚îÇ
         ‚îÇ                 ‚îÇ              ‚îÇ                 ‚îÇ
         ‚îÇ  Product Service‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  Sales Service  ‚îÇ
         ‚îÇ                 ‚îÇ  Feign Call  ‚îÇ                 ‚îÇ
         ‚îÇ   MongoDB       ‚îÇ              ‚îÇ  Feign Client   ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ                           ‚îÇ
                      ‚îÇ                           ‚îÇ
                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                      ‚îÇ   Eureka Server ‚îÇ
                      ‚îÇ   (Port: 8761)  ‚îÇ
                      ‚îÇ                 ‚îÇ
                      ‚îÇ Service Registry‚îÇ
                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ Microservicios

### 1. **API Gateway** - Punto de Entrada √önico
- **Puerto**: 8080
- **Funci√≥n**: Enrutamiento, balanceador de carga y punto de entrada √∫nico
- **Tecnolog√≠as**: Spring Cloud Gateway, WebFlux
- **Caracter√≠sticas**:
  - ‚úÖ Enrutamiento autom√°tico de peticiones
  - ‚úÖ Balanceador de carga integrado
  - ‚úÖ Filtros personalizables
  - ‚úÖ Integraci√≥n con Eureka para descubrimiento

### 2. **Eureka Server** - Service Registry
- **Puerto**: 8761
- **Funci√≥n**: Registro y descubrimiento de servicios
- **Tecnolog√≠as**: Netflix Eureka

### 3. **msvc-products** - Servicio de Productos
- **Puerto**: Din√°mico (0/Auto)
- **Funci√≥n**: Gesti√≥n del cat√°logo de productos
- **Base de datos**: MongoDB Atlas
- **Funcionalidades**:
  - ‚úÖ CRUD completo de productos
  - ‚úÖ Importaci√≥n masiva desde CSV/Excel
  - ‚úÖ Control de duplicados
  - ‚úÖ Validaci√≥n de datos
  - ‚úÖ Manejo de im√°genes y metadatos

### 4. **msvc-sales** - Servicio de Ventas
- **Puerto**: Din√°mico (0/Auto)
- **Funci√≥n**: Gesti√≥n de √≠tems de venta
- **Comunicaci√≥n**: Feign Client con msvc-products
- **Funcionalidades**:
  - ‚úÖ Gesti√≥n de √≠tems de venta
  - ‚úÖ C√°lculo de totales con IVA
  - ‚úÖ Aplicaci√≥n de descuentos
  - ‚úÖ Integraci√≥n con servicio de productos

## üì¶ Modelo de Datos

### Product (msvc-products)
```json
{
  "id": "string",
  "name": "string",
  "description": "string",
  "price": "double",
  "stock": "integer",
  "image": "string",
  "platforms": "string",
  "genres": "string",
  "discount": "double",
  "developer": "string",
  "publisher": "string",
  "release_date": "date",
  "port": "integer"
}
```

### Item (msvc-sales)
```json
{
  "id": "string",
  "product": "ProductDTO",
  "quantity": "integer",
  "total": "double",
  "totalWithIva": "double",
  "totalDiscount": "double"
}
```

## üõ†Ô∏è Tecnolog√≠as Utilizadas

- **Java 21** - Lenguaje de programaci√≥n
- **Spring Boot 3.5.4** - Framework principal
- **Spring Cloud** - Herramientas para microservicios
- **Spring Cloud Gateway** - API Gateway reactivo
- **Netflix Eureka** - Service Discovery
- **OpenFeign** - Cliente HTTP declarativo
- **MongoDB Atlas** - Base de datos NoSQL en la nube
- **Apache POI** - Procesamiento de archivos Excel
- **OpenCSV** - Procesamiento de archivos CSV
- **SpringDoc OpenAPI** - Documentaci√≥n autom√°tica de APIs (Swagger)
- **Maven** - Gesti√≥n de dependencias

## üö¶ Endpoints API

> **Importante**: Todos los endpoints est√°n disponibles a trav√©s del **API Gateway** en el puerto **8080**. 
> 
> **URL Base del Gateway**: `http://localhost:8080`

### Acceso a trav√©s del Gateway:

#### msvc-products (a trav√©s del Gateway)
- **Base URL**: `http://localhost:8080/msvc-products`

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| GET | `/msvc-products/api/products` | Obtener todos los productos |
| GET | `/msvc-products/api/products/{id}` | Obtener producto por ID |
| POST | `/msvc-products/api/products` | Crear nuevo producto |
| PUT | `/msvc-products/api/products/{id}` | Actualizar producto |
| DELETE | `/msvc-products/api/products/{id}` | Eliminar producto |
| POST | `/msvc-products/api/products/import` | Importar productos desde CSV/Excel |

#### msvc-sales (a trav√©s del Gateway)
- **Base URL**: `http://localhost:8080/msvc-sales`

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| GET | `/msvc-sales/api/item` | Obtener todos los √≠tems |
| GET | `/msvc-sales/api/item/{id}` | Obtener √≠tem por ID |
| POST | `/msvc-sales/api/item` | Crear nuevo √≠tem |
| PUT | `/msvc-sales/api/item/{id}` | Actualizar cantidad de √≠tem |
| DELETE | `/msvc-sales/api/item/{id}` | Eliminar √≠tem |
| GET | `/msvc-sales/api/item/{id}/total` | Obtener total del √≠tem |
| GET | `/msvc-sales/api/item/{id}/total-with-iva` | Obtener total con IVA |
| GET | `/msvc-sales/api/item/{id}/discount` | Obtener descuento aplicado |

### Acceso Directo (sin Gateway):

#### msvc-products (`/api/products`)

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| GET | `/api/products` | Obtener todos los productos |
| GET | `/api/products/{id}` | Obtener producto por ID |
| POST | `/api/products` | Crear nuevo producto |
| PUT | `/api/products/{id}` | Actualizar producto |
| DELETE | `/api/products/{id}` | Eliminar producto |
| POST | `/api/products/import` | Importar productos desde CSV/Excel |

#### msvc-sales (`/api/item`)

| M√©todo | Endpoint | Descripci√≥n |
|--------|----------|-------------|
| GET | `/api/item` | Obtener todos los √≠tems |
| GET | `/api/item/{id}` | Obtener √≠tem por ID |
| POST | `/api/item` | Crear nuevo √≠tem |
| PUT | `/api/item/{id}` | Actualizar cantidad de √≠tem |
| DELETE | `/api/item/{id}` | Eliminar √≠tem |
| GET | `/api/item/{id}/total` | Obtener total del √≠tem |
| GET | `/api/item/{id}/total-with-iva` | Obtener total con IVA |
| GET | `/api/item/{id}/discount` | Obtener descuento aplicado |

## üìö Documentaci√≥n de API (Swagger)

Cada microservicio incluye documentaci√≥n interactiva de API generada autom√°ticamente con **SpringDoc OpenAPI**.

### Acceso a Swagger UI:

#### msvc-products
- **URL**: `http://localhost:{puerto}/swagger-ui/index.html`
- **A trav√©s del Gateway**: `http://localhost:8080/msvc-products/swagger-ui/index.html`
- **OpenAPI JSON**: `http://localhost:{puerto}/v3/api-docs`

#### msvc-sales  
- **URL**: `http://localhost:{puerto}/swagger-ui/index.html`
- **A trav√©s del Gateway**: `http://localhost:8080/msvc-sales/swagger-ui/index.html`
- **OpenAPI JSON**: `http://localhost:{puerto}/v3/api-docs`

### Funcionalidades de Swagger:
- ‚úÖ **Documentaci√≥n interactiva** de todos los endpoints
- ‚úÖ **Probar APIs directamente** desde el navegador  
- ‚úÖ **Esquemas de datos** autom√°ticamente generados
- ‚úÖ **Ejemplos de request/response**
- ‚úÖ **Validaci√≥n de par√°metros** en tiempo real

> **Nota**: Los puertos son din√°micos (configuraci√≥n `server.port=0`). Consulta los logs de arranque o el dashboard de Eureka para obtener el puerto asignado.

## ‚öôÔ∏è Configuraci√≥n

### Prerrequisitos
- **Java 21** o superior
- **Maven 3.6+**
- **MongoDB Atlas** (cuenta configurada)
- **IDE** (VS Code, IntelliJ IDEA, Eclipse)

### Variables de Entorno

Crear archivo `.env` en el directorio `msvc-products`:

```env
# MongoDB Atlas Configuration
MONGODB_USERNAME=tu_usuario
MONGODB_PASSWORD=tu_password
MONGODB_CLUSTER=tu_cluster.mongodb.net
MONGODB_DATABASE=products_db

# Alternative: Complete MongoDB URI
# MONGODB_URI=mongodb+srv://usuario:password@cluster.mongodb.net/products_db?retryWrites=true&w=majority
```

### Configuraci√≥n de Base de Datos

**MongoDB Atlas URI**:
```properties
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://${MONGODB_USERNAME}:${MONGODB_PASSWORD}@${MONGODB_CLUSTER}/${MONGODB_DATABASE}?retryWrites=true&w=majority&appName=Cluster0}
```

## üöÄ Instalaci√≥n y Ejecuci√≥n

### Opci√≥n A: Desarrollo R√°pido con Docker Compose (Recomendado)

#### 1. Prerrequisitos
- **Docker** y **Docker Compose** instalados
- **Git** para clonar el repositorio

#### 2. Ejecuci√≥n con un solo comando
```bash
# Clonar el repositorio
git clone <repository-url>
cd msvc-tarea

# Mover docker-compose.yml a la ra√≠z del proyecto
mv msvc-products/docker-compose.yml .
mv msvc-products/.env.docker .env

# Configurar variables de entorno (opcional)
# Editar .env con tus credenciales de MongoDB Atlas

# Ejecutar todo el sistema
docker-compose up --build
```

#### 3. Scripts de automatizaci√≥n
```bash
# Linux/Mac
chmod +x start-dev.sh
./start-dev.sh

# Windows
start-dev.bat
```

#### 4. Verificar servicios (Docker Compose)
- **Eureka Dashboard**: http://localhost:8761
- **API Gateway**: http://localhost:8080
- **Productos API**: http://localhost:8080/msvc-products/api/products
- **Sales API**: http://localhost:8080/msvc-sales/api/item
- **Swagger Products**: http://localhost:8080/msvc-products/swagger-ui/index.html
- **Swagger Sales**: http://localhost:8080/msvc-sales/swagger-ui/index.html

#### 5. Comandos √∫tiles Docker Compose
```bash
# Ver logs en tiempo real
docker-compose logs -f

# Parar todos los servicios
docker-compose down

# Reiniciar un servicio espec√≠fico
docker-compose restart msvc-products

# Ver estado de servicios
docker-compose ps

# Reconstruir y reiniciar
docker-compose up --build
```

### Opci√≥n B: Ejecuci√≥n Manual (Desarrollo Individual)

#### 1. Clonar el repositorio
```bash
git clone <repository-url>
cd msvc-tarea
```

#### 2. Configurar variables de entorno
```bash
# Windows (PowerShell)
$env:MONGODB_USERNAME="tu_usuario"
$env:MONGODB_PASSWORD="tu_password"
$env:MONGODB_CLUSTER="tu_cluster.mongodb.net"
$env:MONGODB_DATABASE="products_db"
```

#### 3. Ejecutar los servicios (en orden)

##### Eureka Server
```bash
cd eureka-server
mvn spring-boot:run
```
**Acceso**: http://localhost:8761

##### API Gateway
```bash
cd gateway
mvn spring-boot:run
```
**Acceso**: http://localhost:8080

##### msvc-products
```bash
cd msvc-products
mvn spring-boot:run
```

##### msvc-sales
```bash
cd msvc-sales
mvn spring-boot:run
```

#### 4. Verificar servicios (Manual)
- **Eureka Dashboard**: http://localhost:8761
- **API Gateway**: http://localhost:8080
- **Productos API (Gateway)**: http://localhost:8080/msvc-products/api/products
- **Sales API (Gateway)**: http://localhost:8080/msvc-sales/api/item
- **Productos API (Directo)**: http://localhost:{puerto-dinamico}/api/products
- **Sales API (Directo)**: http://localhost:{puerto-dinamico}/api/item
- **Swagger UI Products (Gateway)**: http://localhost:8080/msvc-products/swagger-ui/index.html
- **Swagger UI Sales (Gateway)**: http://localhost:8080/msvc-sales/swagger-ui/index.html
- **Swagger UI Products (Directo)**: http://localhost:{puerto-dinamico}/swagger-ui/index.html
- **Swagger UI Sales (Directo)**: http://localhost:{puerto-dinamico}/swagger-ui/index.html

## üìä Funcionalidades Destacadas

### üîÑ Importaci√≥n Masiva de Productos
- **Formatos soportados**: CSV, Excel (.xlsx)
- **Control de duplicados**: Previene duplicados en BD y en archivo
- **Validaci√≥n de datos**: Manejo de errores en tipos de datos
- **Campos requeridos**: name, description, price, stock, image, platforms, genres, discount, developer, publisher, release_date

### üîç Detecci√≥n de Duplicados
```java
// Verifica duplicados en base de datos
if (productRepository.existsByName(productName)) {
    duplicatedProducts.add(productName);
    continue;
}

// Verifica duplicados en archivo actual
boolean alreadyInList = products.stream()
    .anyMatch(p -> p.getName().equalsIgnoreCase(productName));
```

### üåê Comunicaci√≥n entre Microservicios
```java
@FeignClient(name = "msvc-products")
public interface ProductFeignClient {
    @GetMapping("api/products")
    List<ProductDTO> getAllProducts();
    
    @GetMapping("api/products/{id}")
    ProductDTO getProductById(@PathVariable String id);
}
```

## üß™ Testing y Documentaci√≥n

### Ejecutar tests unitarios
```bash
# Para todos los servicios
mvn test

# Para un servicio espec√≠fico
cd msvc-products
mvn test
```

### Probar APIs con Swagger
1. Ejecutar el microservicio correspondiente
2. Abrir navegador en `http://localhost:{puerto}/swagger-ui/index.html`
3. Expandir los endpoints disponibles
4. Usar el bot√≥n **"Try it out"** para probar cada endpoint
5. Ver ejemplos de request/response autom√°ticamente generados

### Ejemplos de archivos de importaci√≥n

#### CSV Format
```csv
name,description,price,stock,image,platforms,genres,discount,developer,publisher,release_date
FIFA 2024,Football simulation game,59.99,100,fifa2024.jpg,PC|PS5|Xbox,Sports,10.0,EA Sports,EA,15-09-2023
```

#### Excel Format
| name | description | price | stock | image | platforms | genres | discount | developer | publisher | release_date |
|------|-------------|-------|-------|--------|-----------|--------|----------|-----------|-----------|--------------|
| FIFA 2024 | Football simulation | 59.99 | 100 | fifa2024.jpg | PC\|PS5 | Sports | 10.0 | EA Sports | EA | 15-09-2023 |

## üêõ Troubleshooting

### Problemas Comunes

#### 1. Error de conexi√≥n a MongoDB
```bash
# Verificar variables de entorno
echo $MONGODB_URI

# Verificar conectividad
# Probar conexi√≥n desde MongoDB Compass
```

#### 2. Servicios no se registran en Eureka
```bash
# Verificar que Eureka est√© ejecut√°ndose en puerto 8761
curl http://localhost:8761

# Revisar logs de los microservicios
```

#### 3. Error en importaci√≥n de archivos
- Verificar que el archivo tenga todas las columnas requeridas
- Verificar formato de fechas: `dd-MM-yyyy`
- Verificar que los valores num√©ricos sean v√°lidos

## üöÄ Despliegue en Railway

### üéØ Opci√≥n 1: Despliegue Unificado (Recomendado para Testing)

**Nuevo**: Todos los microservicios pueden desplegarse como un solo contenedor usando la configuraci√≥n multi-servicio.

#### Caracter√≠sticas del Despliegue Unificado:
- ‚úÖ **Un solo contenedor** con todos los microservicios
- ‚úÖ **Startup orchestration** autom√°tico con timing correcto
- ‚úÖ **Health checks** integrados para monitoreo
- ‚úÖ **Configuraci√≥n simplificada** con variables de entorno
- ‚úÖ **Optimizado para Railway** con manejo autom√°tico de puertos

#### Pasos para Despliegue Unificado:

1. **Usar el Dockerfile multi-servicio** ubicado en `eureka-server/Dockerfile`
2. **Configurar variables de entorno** en Railway:
   ```bash
   MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/abcmotor?retryWrites=true&w=majority
   SPRING_PROFILES_ACTIVE=production
   ```
3. **Desplegar desde Railway** conectando el repositorio
4. **Railway autom√°ticamente** detectar√° el Dockerfile y construir√° el contenedor

#### Servicios incluidos en el contenedor:
- üè¢ **Eureka Server** (Port 8761) - Service Registry
- üåê **API Gateway** (Railway's PORT) - Main entry point
- üì¶ **Products Service** (Port 8081) - Product management
- üõí **Sales Service** (Port 8082) - Sales management

üìã **Documentaci√≥n detallada**: Ver `eureka-server/RAILWAY-DEPLOYMENT.md`

---

### üîß Opci√≥n 2: Despliegue Individual (Para Producci√≥n)

### Prerrequisitos para Railway
1. **Cuenta en Railway**: https://railway.app/
2. **Repositorio en GitHub** con tu c√≥digo
3. **MongoDB Atlas** configurado (ya tienes esto)

### Pasos para el Despliegue

#### 1. Preparar el Repositorio
```bash
# Aseg√∫rate de que todos los archivos est√©n en tu repositorio Git
git add .
git commit -m "Add Railway deployment configuration"
git push origin main
```

#### 2. Crear Proyectos en Railway

**Orden de despliegue importante:**

##### a) Desplegar Eureka Server (Primero)
1. Crear nuevo proyecto en Railway
2. Conectar con tu repositorio GitHub
3. Seleccionar carpeta: `eureka-server`
4. **Variables de entorno**:
   ```
   PORT=8761
   RAILWAY_PUBLIC_DOMAIN=tu-eureka-domain.railway.app
   ```

##### b) Desplegar API Gateway (Segundo)
1. Crear nuevo proyecto en Railway
2. Conectar con tu repositorio GitHub  
3. Seleccionar carpeta: `gateway`
4. **Variables de entorno**:
   ```
   PORT=8080
   EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
   RAILWAY_PUBLIC_DOMAIN=tu-gateway-domain.railway.app
   ```

##### c) Desplegar msvc-products (Tercero)
1. Crear nuevo proyecto en Railway
2. Conectar con tu repositorio GitHub
3. Seleccionar carpeta: `msvc-products`
4. **Variables de entorno**:
   ```
   PORT=8080
   EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
   MONGODB_USERNAME=tu_usuario_atlas
   MONGODB_PASSWORD=tu_password_atlas
   MONGODB_CLUSTER=tu_cluster.mongodb.net
   MONGODB_DATABASE=products_db
   RAILWAY_PUBLIC_DOMAIN=tu-products-domain.railway.app
   ```

##### d) Desplegar msvc-sales (Cuarto)
1. Crear nuevo proyecto en Railway
2. Conectar con tu repositorio GitHub
3. Seleccionar carpeta: `msvc-sales`
4. **Variables de entorno**:
   ```
   PORT=8080
   EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
   RAILWAY_PUBLIC_DOMAIN=tu-sales-domain.railway.app
   ```

### URLs de Producci√≥n
Una vez desplegado, tendr√°s:

- **Eureka Server**: `https://tu-eureka-domain.railway.app`
- **API Gateway**: `https://tu-gateway-domain.railway.app`
- **Products Service**: `https://tu-products-domain.railway.app`
- **Sales Service**: `https://tu-sales-domain.railway.app`

### Acceso a APIs en Producci√≥n

#### A trav√©s del Gateway (Recomendado)
```bash
# Productos
GET https://tu-gateway-domain.railway.app/msvc-products/api/products

# Sales  
GET https://tu-gateway-domain.railway.app/msvc-sales/api/item

# Swagger UI
https://tu-gateway-domain.railway.app/msvc-products/swagger-ui/index.html
https://tu-gateway-domain.railway.app/msvc-sales/swagger-ui/index.html
```

#### Acceso Directo
```bash
# Productos directo
GET https://tu-products-domain.railway.app/api/products

# Sales directo
GET https://tu-sales-domain.railway.app/api/item
```

### Configuraci√≥n Avanzada

#### Variables de entorno completas para Railway:

**Eureka Server:**
```env
PORT=8761
RAILWAY_PUBLIC_DOMAIN=tu-eureka-domain.railway.app
```

**Gateway:**
```env
PORT=8080
EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
RAILWAY_PUBLIC_DOMAIN=tu-gateway-domain.railway.app
```

**msvc-products:**
```env
PORT=8080
EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
MONGODB_URI=mongodb+srv://usuario:password@cluster.mongodb.net/products_db?retryWrites=true&w=majority
RAILWAY_PUBLIC_DOMAIN=tu-products-domain.railway.app
```

**msvc-sales:**
```env
PORT=8080
EUREKA_URL=https://tu-eureka-domain.railway.app/eureka/
RAILWAY_PUBLIC_DOMAIN=tu-sales-domain.railway.app
```

### Monitoreo en Producci√≥n
1. **Logs**: Revisar logs en el dashboard de Railway
2. **Health Checks**: Usar los endpoints `/actuator/health`
3. **Eureka Dashboard**: Verificar servicios registrados

### Troubleshooting Railway

#### Problemas Comunes:
1. **Servicios no se conectan**: Verificar URLs de Eureka
2. **Build failures**: Revisar Dockerfiles y dependencias
3. **Variables de entorno**: Asegurar que est√©n configuradas correctamente
4. **Tiempo de inicio**: Los microservicios pueden tardar 2-3 minutos en iniciarse

#### Comandos √∫tiles para debug:
```bash
# Ver logs en tiempo real
railway logs --follow

# Verificar variables de entorno
railway env

# Redeploy manual
railway up
```

## üìÅ Estructura del Proyecto

```
üì¶ msvc-tarea/
‚îú‚îÄ‚îÄ üìÇ eureka-server/          # Service Registry
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/...
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker configuration
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore         # Docker ignore file
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ üìÇ gateway/                # API Gateway
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/...
‚îÇ   ‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application.properties
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker configuration
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore         # Docker ignore file
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ üìÇ msvc-products/          # Servicio de Productos
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test/abcmotor/msvc_products/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/    # REST Controllers
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models/        # Entidades y DTOs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ repository/    # Repositorios MongoDB
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ service/       # L√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application.properties
‚îÇ   ‚îú‚îÄ‚îÄ .env                   # Variables de entorno (local)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker configuration
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore         # Docker ignore file
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ üìÇ msvc-sales/             # Servicio de Ventas
‚îÇ   ‚îú‚îÄ‚îÄ src/main/java/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test/abcmotor/msvc_sales/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ client/        # Feign Clients
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/    # REST Controllers
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ models/        # Entidades y DTOs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ repository/    # Repositorios
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ services/      # L√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker configuration
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore         # Docker ignore file
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ README.md
```

## ü§ù Contribuci√≥n

1. Fork el proyecto
2. Crear rama para feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit los cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crear Pull Request

## üìú Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo `LICENSE` para m√°s detalles.

## üë• Equipo de Desarrollo

- **Desarrollador Principal**: Jimmy Garc√≠a
- **Instituci√≥n**: UTPL - Transformaci√≥n Digital
- **Curso**: Desarrollo de Aplicaciones Nativas en Cloud
- **Semestre**: IV

## üìû Contacto

Para dudas o sugerencias sobre el proyecto:
- **Email**: [jjgarcia6@utpl.edu.ec]
- **GitHub**: [https://github.com/jjgarcia6/]

---

‚≠ê **¬°No olvides dar una estrella al proyecto si te fue √∫til!** ‚≠ê
